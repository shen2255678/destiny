é€™æ˜¯ä¸€å€‹éå¸¸å°ˆæ¥­çš„ç³»çµ±é‡æ§‹æª¢æŸ¥ï¼æˆ‘å¹«ä½ ä»”ç´° Review äº†ä½ ä¸Šå‚³çš„é€™ä¸‰æ”¯æ ¸å¿ƒç¨‹å¼ç¢¼ï¼Œä½ å°‡ã€Œæ˜Ÿåº§ç›¸ä½ã€å‡ç´šç‚ºã€Œç²¾ç¢ºè§’åº¦ (Degree-based Aspects)ã€çš„æ–¹å‘å®Œå…¨æ­£ç¢ºï¼Œé€™èƒ½å¤§å¹…æå‡ Tier 1ï¼ˆæœ‰ç²¾ç¢ºæ™‚é–“ï¼‰ç”¨æˆ¶çš„æº–ç¢ºåº¦ã€‚

ä¸éï¼Œåœ¨æ˜Ÿç›¤å¹¾ä½•å­¸è½‰æ›ç‚ºæ¼”ç®—æ³•çš„éç¨‹ä¸­ï¼Œç›®å‰ç³»çµ±è£¡å­˜åœ¨ **2 å€‹æœƒåš´é‡å½±éŸ¿åˆ†æ•¸èˆ‡é‚è¼¯çš„ã€Œè‡´å‘½ Bugã€**ã€‚å¦‚æœä¸ä¿®å¾©ï¼Œæœƒå°è‡´æœ‰è¼¸å…¥ç²¾ç¢ºæ™‚é–“çš„ç”¨æˆ¶åˆ†æ•¸åè€Œæš´è·Œï¼Œä»¥åŠå¤å…¸å æ˜Ÿçš„å®šä½æ˜Ÿéˆæ–·è£‚ã€‚

è«‹ç«‹åˆ»é€²è¡Œä»¥ä¸‹å…©è™•çš„èª¿æ•´ï¼š

---

### ğŸš¨ è‡´å‘½ Bug 1ï¼šç²¾ç¢ºç›¸ä½ (Exact Aspect) çš„ã€Œç©ºç›¸ä½æ‡²ç½°ã€éé‡

**æª”æ¡ˆï¼š** `astro-service/matching.py`

**[å•é¡Œé»]ï¼š**
åœ¨ `compute_exact_aspect` ä¸­ï¼Œå¦‚æœå…©é¡†æ˜Ÿé«”çš„è·é›¢ä¸åœ¨ä½ è¨­å®šçš„å®¹è¨±åº¦ (orb) å…§ï¼Œç¨‹å¼æœ€å¾Œä¸€è¡Œæœƒ `return 0.1`ã€‚
**é€™åœ¨äº¤å‹æ¼”ç®—æ³•ä¸­æ˜¯å€‹ç½é›£ï¼** 0.1 çš„åˆ†æ•¸æ¯”ã€Œå››åˆ†ç›¸ (Square) çš„ 0.2ã€é‚„è¦ä½ã€‚é€™ä»£è¡¨ï¼šå¦‚æœå…©å€‹äººå®Œå…¨ã€Œæ²’æœ‰ç›¸ä½ï¼ˆä¸­ç«‹ï¼‰ã€ï¼Œç³»çµ±çµ¦çš„åˆ†æ•¸ç«Ÿç„¶æ¯”ã€Œåš´é‡è¡çªï¼ˆå››åˆ†ç›¸ï¼‰ã€é‚„è¦å·®ï¼
æ­¤å¤–ï¼Œé€™æœƒå°è‡´ **ã€Œç²¾æº–æ™‚é–“æ‡²ç½°ã€**ï¼šæ²’æœ‰ç²¾ç¢ºæ™‚é–“çš„ Tier 3 ç”¨æˆ¶æœƒè§¸ç™¼ `compute_sign_aspect`ï¼Œå¦‚æœæ˜Ÿåº§å‰›å¥½æ˜¯ä¸‰åˆ†ç›¸ï¼Œæœƒæ‹¿åˆ° `0.85`ï¼›ä½† Tier 1 ç”¨æˆ¶å› ç‚ºç²¾ç¢ºåº¦æ•¸å·®äº† 9 åº¦ï¼ˆè¶…å‡º 8 åº¦ orbï¼‰ï¼Œå°±æœƒæ‹¿åˆ° `0.1`ã€‚Tier 1 ç”¨æˆ¶çš„åˆ†æ•¸æœƒè«åå…¶å¦™æš´è·Œã€‚

**[âœ… ä¿®æ­£æ–¹æ¡ˆ]ï¼š**
æˆ‘å€‘æ‡‰è©²æŠŠæ²’æœ‰ç²¾ç¢ºç›¸ä½çš„åŸºæº–å€¼æ‹‰å›ã€Œä¸­ç«‹ (0.5)ã€ï¼Œä¸¦ä¸”åœ¨ `_resolve_aspect` ä¸­ï¼Œå¦‚æœæ²’æœ‰ç²¾ç¢ºç›¸ä½ï¼Œæ‡‰è©²è¦**ã€Œä¿ç•™ä¸€é»é»æ˜Ÿåº§èƒŒæ™¯å…ƒç´  (Sign Aspect) çš„åˆ†æ•¸ã€**ã€‚

è«‹å°‡ `matching.py` ä¸­çš„é€™å…©å€‹å‡½å¼æ›¿æ›ç‚ºä»¥ä¸‹ç¨‹å¼ç¢¼ï¼š

```python
def compute_exact_aspect(deg_a: float, deg_b: float, mode: str = "harmony") -> float:
    """Orb-based exact degree aspect score with linear decay (0.0-1.0)."""
    if deg_a is None or deg_b is None:
        return 0.5
    dist = get_shortest_distance(deg_a, deg_b)
    for center, orb, harm_max, tens_max in ASPECT_RULES:
        diff = abs(dist - center)
        if diff <= orb:
            max_score = harm_max if mode == "harmony" else tens_max
            strength_ratio = 1.0 - (diff / orb)
            return round(0.2 + (max_score - 0.2) * strength_ratio, 2)
            
    # ã€ä¿®æ­£ã€‘ï¼šå°‡ 0.1 æ”¹ç‚º 0.5ã€‚æ²’æœ‰å½¢æˆå¼·çƒˆç›¸ä½ä»£è¡¨ã€Œä¸­ç«‹ã€ï¼Œä¸æ˜¯ã€Œæ¥µåº¦æƒ¡åŠ£ã€ã€‚
    return 0.5  


def _resolve_aspect(
    deg_x: Optional[float], sign_x: Optional[str],
    deg_y: Optional[float], sign_y: Optional[str],
    mode: str,
) -> float:
    """Use exact degrees if both available; fall back to sign-level aspect."""
    # å…ˆç®—å‡ºæ˜Ÿåº§åº•å±¤çš„èƒ½é‡åˆ†æ•¸ (ä¾‹å¦‚åŒå±¬ç«è±¡æ˜Ÿåº§çš„åŸºç¤å…±é³´)
    sign_score = compute_sign_aspect(sign_x, sign_y, mode)
    
    if deg_x is not None and deg_y is not None:
        exact_score = compute_exact_aspect(deg_x, deg_y, mode)
        # ã€ä¿®æ­£ã€‘ï¼šå¦‚æœç²¾ç¢ºåº¦æ•¸æ²’æœ‰å½¢æˆæœ‰æ•ˆç›¸ä½ (0.5 ä¸­ç«‹)ï¼Œ
        # æˆ‘å€‘ä¸èƒ½ç›´æ¥æ‹‹æ£„æ˜Ÿåº§å±¬æ€§ã€‚çµ¦äºˆæ˜Ÿåº§åˆ†æ•¸ 80% çš„æ¬Šé‡ï¼Œä¿ç•™èƒŒæ™¯å…±é³´ã€‚
        if exact_score == 0.5:
            return round(sign_score * 0.8, 2)
        return exact_score
        
    return sign_score

```

---

### ğŸš¨ è‡´å‘½ Bug 2ï¼šå®šä½æ˜Ÿéˆ (Dispositor Chain) çš„ç„¡è¾œæˆªæ–·

**æª”æ¡ˆï¼š** `astro-service/psychology.py`

**[å•é¡Œé»]ï¼š**
åœ¨ `find_dispositor_chain` ä¸­ï¼Œä½ å¯«äº†ä¸€å€‹é˜²æ­¢ç„¡é™è¿´åœˆçš„é˜²å‘†æ©Ÿåˆ¶ï¼š

```python
# Termination 3: Loop guard (max 3 unique planets before giving up)
if ruler in visited or len(visited) >= 3:

```

**é€™å€‹é™åˆ¶å¤ªåš´æ ¼äº†ï¼** åœ¨å æ˜Ÿå­¸ä¸­ï¼Œä¸€é¡†æ˜Ÿè¿½æº¯åˆ°æœ€çµ‚å®šä½æ˜Ÿï¼Œç¶“é 4 åˆ° 5 é¡†æ˜Ÿæ˜¯éå¸¸æ­£å¸¸çš„ã€‚
ä¾‹å¦‚ï¼šã€Œæœˆäº®é›™å­ â†’ æ°´æ˜Ÿé‡‘ç‰› â†’ é‡‘æ˜Ÿç‰¡ç¾Š â†’ ç«æ˜Ÿæ‘©ç¾¯ â†’ åœŸæ˜Ÿæ‘©ç¾¯ (æœ€çµ‚å®šä½æ˜Ÿ)ã€ã€‚é€™å€‹éˆæ¢é•·åº¦æ˜¯ 5ã€‚ä½ çš„ç¨‹å¼è·‘åˆ°ç¬¬ 3 é¡†æ˜Ÿæ™‚ï¼Œå°±æœƒç›´æ¥å›å‚³ `mixed_loop`ï¼ˆæ­»çµï¼‰ä¸¦çµ‚æ­¢ï¼Œå°è‡´è¨±å¤šç”¨æˆ¶æ°¸é ç®—ä¸å‡ºæœ€çµ‚å¤§ Bossã€‚

**[âœ… ä¿®æ­£æ–¹æ¡ˆ]ï¼š**
å› ç‚ºåªæœ‰ 10 é¡†æ˜Ÿï¼Œå¦‚æœç™¼ç”Ÿæ­»çµï¼Œå¿…ç„¶æ˜¯ `ruler in visited`ï¼ˆè¿½åˆ°å·²ç¶“å‡ºç¾éçš„æ˜Ÿï¼‰ï¼Œæˆ‘å€‘**å®Œå…¨ä¸éœ€è¦é™åˆ¶ `len(visited)**`ã€‚

è«‹å°‡ `psychology.py` è£¡çš„é€™æ®µé˜²å‘†æ©Ÿåˆ¶ä¿®æ­£ï¼š

```python
        # Termination 3: Loop guard (åªæª¢æŸ¥æ˜¯å¦å½¢æˆç„¡è§£çš„é–‰ç’°)
        # ã€ä¿®æ­£ã€‘ï¼šç§»é™¤ len(visited) >= 3 çš„é™åˆ¶ï¼Œå…è¨±é•·éˆæ¢è¿½æº¯
        if ruler in visited:
            return {"chain": chain, "final_dispositor": None,
                    "mutual_reception": [], "status": "mixed_loop"}

        visited.add(current)
        current = ruler

```

---

### ğŸ’¡ ç¸½çµ

ä½ å¯«çš„ `chart.py` èª¿ç”¨ç‘å£«æ˜Ÿæ›†è¡¨ï¼ˆSwiss Ephemerisï¼‰çš„é‚è¼¯éå¸¸ä¹¾æ·¨ä¿è½ï¼Œåº¦æ•¸çš„è¨ˆç®—å®Œå…¨æ­£ç¢ºï¼

åªè¦æŠŠä¸Šè¿°çš„å…©å€‹é»ä¿®æ­£ï¼š

1. **é‡‹æ”¾ç²¾ç¢ºç›¸ä½çš„ã€Œ0.1 åˆ†æ‡²ç½°ã€ï¼Œä¸¦ä¿ç•™æ˜Ÿåº§å…ƒç´ çš„ä¿åº•åˆ†æ•¸ã€‚**
2. **è§£é™¤å®šä½æ˜Ÿéˆçš„ã€Œ3 é¡†æ˜Ÿé•·åº¦é™åˆ¶ã€ã€‚**

ä½ çš„é€™å¥—ã€Œè¥¿æ–¹å æ˜Ÿç²¾ç¢ºè§’åº¦æ¼”ç®—æ³•ã€å°±å¯ä»¥æ­£å¼ä¸Šç·šï¼ŒTier 1 æº–ç¢ºåº¦æœƒéå¸¸é©šäººï¼ä½ å¯ä»¥ç›´æ¥æŠŠé€™å…©æ®µ Code è²¼å›å»è¦†è“‹ã€‚