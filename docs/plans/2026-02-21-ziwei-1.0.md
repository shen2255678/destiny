在紫微斗數中，**「空宮（無主星）」與「主星的獨特星性（如破軍、七殺等）」絕對會引發合盤結果的核爆級變化。如果前一輪討論的「四化飛星」是能量的流向，那麼「空宮」與「主星」就是這些能量的原始載體與地形**。

如果你的 V2.0 業力引擎要做到極致，這兩大機制必須寫入演算法中。以下我為你拆解它們在交友軟體演算法與 UI 劇本中的具體應用：

---

### 一、 空宮機制 (The Empty Palace Protocol)

「空宮」代表該宮位沒有 14 顆主星坐守。在玄學與心理學上，空宮意味著**「沒有既定框架、極易受外界影響、充滿不安全感但也最具可塑性」**。

在演算法中，我們必須啟動**「借星安宮（Borrowing Stars）」**的運算規則：

#### 1. 夫妻宮是空宮：沒有固定天菜，憑感覺暈船

* **演算法邏輯：** 系統偵測到 User A 的夫妻宮為空，必須抓取對宮（事業宮）的星曜來作為擇偶標準，且標準會「大幅放寬」。
* **UI 劇本：** 「你的感情觀非常憑感覺（夫妻宮無主星）。你沒有絕對的『理想型清單』，很容易因為對方在某個專業領域閃閃發光（借對宮事業宮的星曜），或是在某個瞬間打動你，你就毫無預警地墜入愛河。」

#### 2. 命宮是空宮：變色龍效應 (影響 RPV 權力動態)

* **演算法邏輯：** 命宮空宮的人，自我邊界較模糊。在 `RPV 演算法` 中，如果對方的主星非常強勢（如紫微、七殺、破軍），空宮方的 （框架分數）會自動降低，極易成為 **Sub（跟隨者/妥協方）**。
* **UI 劇本：** 「在感情中，你擁有極強的『變色龍特質』。你很容易為了配合你深愛的人，改變自己的形狀與生活習慣。對方越強勢，你越容易傾斜並依附於對方。」

---

### 二、 14 主星的「人設矩陣」 (The Star Archetypes)

你提到的**破軍星**，在紫微斗數中屬於「殺破狼（七殺、破軍、貪狼）」格局，這三顆星是絕對的動態星，負責破壞、創新與慾望。

為了讓演算法能輕鬆讀取，我們必須將 14 顆主星歸類為對應你「四軌演算法」的參數池：

#### 1. 殺破狼 (七殺、破軍、貪狼) ➔ 【極致的 Passion Track 激情軌】

* **星性本質：** 叛逆、高慾望、喜新厭舊、愛恨強烈。
* **合盤影響：** 如果 User A 的命宮或夫妻宮有破軍，這段關係**絕對不能無聊**！如果對方太安穩，破軍會自己製造危機來尋找刺激。
* **UI 劇本 (針對破軍)：** 「你的靈魂裡住著一個『狂熱的叛逆者（破軍星）』。對你而言，沒有波瀾的愛情就像一潭死水。你需要的是一個能跟你一起瘋狂、不斷為關係注入新鮮感與刺激的對象，否則你很快就會感到窒息並想逃離。」

#### 2. 紫府武相 (紫微、天府、武曲、天相) ➔ 【穩健的 Partner Track 伴侶軌】

* **星性本質：** 掌控、務實、保護慾、講究門當戶對與現實條件。
* **合盤影響：** 如果雙方都是這類星曜，RPV 演算法中的「權力爭奪」會非常明顯（兩個 Dom 打架），但一旦確立關係，結構最穩定。
* **UI 劇本 (針對紫微/天府)：** 「你是感情中的『國王/女王』。比起虛無縹緲的浪漫，你更看重對方的現實能力與責任感。你願意為伴侶提供最強大的保護傘，但前提是，對方必須給予你絕對的尊重與臣服。」

#### 3. 機月同梁 (天機、太陰、天同、天梁) ➔ 【溫和的 Friend / Soul Track 朋友/靈魂軌】

* **星性本質：** 思考、敏感、善良、精神交流。
* **合盤影響：** 精神內耗較大，需要極高的情緒價值。非常看重「聊天對不對頻」。
* **UI 劇本 (針對太陰/天機)：** 「你是心思極度細膩的『情感雷達』。你對感情的防備心較重，性吸引力無法輕易打動你，你真正在尋找的是一個能聽懂你弦外之音、安撫你焦慮靈魂的知己。」

#### 4. 巨門、太陽 ➔ 【溝通與付出】

* **合盤影響：** 巨門掌管溝通與暗黑面（像西方占星的冥王星/8宮），太陽掌管無條件的燃燒與付出。

---

### 💻 開發實作：如何整合進 JSON 與演算法？

在你的 JS 業力引擎中，你可以建構一個 `stars_dictionary.json`，給每顆星設定它的「軌道權重」與「RPV 傾向」：

```json
{
  "po_jun": {
    "name": "破軍",
    "track_weights": {"passion": 0.5, "partner": -0.2, "friend": 0.1, "soul": 0.3},
    "rpv_modifier": {"frame_strength": 15, "default_role": "Dom", "volatility": "high"},
    "ui_tag": "🔥 狂熱叛逆者"
  },
  "empty_palace": {
    "name": "空宮",
    "track_weights": {"passion": 0, "partner": 0, "friend": 0, "soul": 0.2},
    "rpv_modifier": {"frame_strength": -15, "default_role": "Sub", "adaptability": "high"},
    "ui_tag": "🌊 靈魂變色龍"
  }
}

```

**系統運作流程：**

1. 抓取雙方的命宮與夫妻宮主星。
2. **遇到空宮：** 觸發 `borrow_stars(opposite_palace)` 函數，並將該用戶標記為 `is_fluid=True`（易妥協體質）。
3. **加權計算：** 如果一方命宮有「破軍」，演算法自動將「Passion Track」總分乘以 1.2 倍，因為這個人天生需要高張力。
4. **輸出劇本：** 結合前一輪的飛星（化祿/化忌），你的 App 就能精準告訴使用者：「*你這個破軍星的狂熱份子，剛好遇上了能無限包容你的空宮伴侶，而且你還飛化祿給他！這是一場你主導、他享受的完美熱戀！*」



在紫微斗數的 12 宮位矩陣中，每一個宮位都有一個「對宮」（例如：命宮對遷移宮、夫妻宮對事業宮）。它們就像是一條橡皮筋的兩端，存在著強烈的引力。當某個宮位是「空宮」時，它就會像一個黑洞，直接把對宮的星曜能量「吸過來」用。

如果我們要把它寫進你的交友軟體演算法，這不僅僅是「把星曜複製貼上」這麼簡單。在玄學與心理學上，「借來的星」會產生**「不穩定、受外界影響大、投影效應」**的特質。

以下是「空宮借對宮」在你的演算法與 UI 劇本中，最完美的操作指南：

### 一、 演算法底層邏輯：衰減係數 (Attenuation Factor)

借過來的星，終究不是自己家裡長出來的。在程式碼計分時，我們通常會給借來的星曜加上一個**「衰減係數（通常是 70% ~ 80% 的強度）」**，並且將這個人的特質標記為「高環境依賴性」。

**💻 虛擬碼範例：**

```python
def get_palace_stars(user, palace_name):
    stars = user.chart[palace_name]
    
    # 如果該宮位有主星，回傳 100% 強度
    if stars:
        return {"stars": stars, "strength": 1.0, "is_borrowed": False}
        
    # 如果是空宮，借對宮 (opposite_palace) 的主星
    opposite_palace = get_opposite_palace(palace_name)
    borrowed_stars = user.chart[opposite_palace]
    
    # 回傳借來的星，強度打 8折 (0.8)，並標記為借用
    return {"stars": borrowed_stars, "strength": 0.8, "is_borrowed": True}

```

---

### 二、 核心宮位「借對宮」的 UI 劇本與心理投射

當系統偵測到使用者的特定宮位是「空宮借對宮」時，前端 UI 可以直接生成極具洞察力的分析。以下是幾個最關鍵的宮位借星邏輯：

#### 1. 命宮（空宮） 借 遷移宮 ➔ 【在人群中尋找自我】

* **心理動力：** 命宮空的人，內在缺乏一個強硬的「核心人設」，他們是天生的演員與變色龍。他們把對宮（遷移宮/外在社交）的樣子借過來當作自己。
* **合盤影響：** RPV 權力動態中，極易受對方影響（偏 Sub）。
* **UI 劇本：** 「你的自我邊界非常柔軟（命宮無主星）。在感情中，你擁有極強的同理與適應力，你往往會透過『伴侶看你的眼光』來定義自己的價值。你很容易為愛改變自己，請務必挑選一個能溫柔接住你、且人品極佳的對象，因為你會不知不覺變成他的形狀。」

#### 2. 夫妻宮（空宮） 借 事業宮 ➔ 【智性戀與慕強心理】

* **心理動力：** 夫妻宮空，代表對婚姻沒有固定的幻想。借用對宮（事業宮），意味著擇偶標準完全與「工作表現、社會成就、企圖心」掛鉤。
* **合盤影響：** 伴侶軌（Partner Track）的配對條件，會自動切換為對方的「事業成就或工作態度」。
* **UI 劇本：** 「你是標準的『智性戀』與『慕強體質』（夫妻宮借事業宮）。你對單純的浪漫甜言蜜語免疫，真正能讓你心動甚至暈船的，是對方在工作領域中閃閃發光、專注且專業的模樣。你能與伴侶成為最強大的事業共同體。」

#### 3. 福德宮（空宮） 借 財帛宮 ➔ 【物質即是精神，現實即是安全感】

* **心理動力：** 福德宮看精神靈魂，財帛宮看賺錢理財。福德空宮借財帛，代表這個人的「精神安全感」必須建立在「物質穩定」之上。
* **合盤影響：** 靈魂軌（Soul Track）的判定中，對方如果不具備務實的特質，絕對無法安撫他的焦慮。
* **UI 劇本：** 「在你的潛意識裡，『麵包就是愛情的基礎』（福德借財帛）。你極度務實，討厭畫大餅的感情。對方如果能把現實生活打理得井井有條，甚至跟你一起規劃財務未來，你的靈魂就會感到無與倫比的平靜與安全。」

#### 4. 子女宮（空宮） 借 田宅宮 ➔ 【性與愛的私密防護罩】

* **心理動力：** 子女宮看性慾/桃花，田宅宮看家庭/隱私。子女空借田宅，代表這個人在性愛與肉體關係上，極度需要「安全、私密、像家一樣」的環境。
* **合盤影響：** 激情軌（Passion Track）中，排斥過於奔放或沒有邊界感的對象。
* **UI 劇本：** 「在親密關係與肉體接觸上，你極度需要『安全感與隱私』（子女借田宅）。你不喜歡太快、太具侵略性的進展。唯有當你們處在一個讓你感到像『家』一樣放鬆、絕對私密的空間時，你才會完全卸下防備，展現極致的熱情。」

---

### 💡 總結給你的開發策略

把「空宮借對宮」這個機制寫進去，你的演算法會產生質的飛躍：

1. **解決了「算不出東西」的 Bug：** 程式遇到空宮不會再報錯或給 0 分，而是能順滑地調用對宮資料。
2. **多了一層心理學的厚度：** 透過這套邏輯，你能告訴使用者：「你之所以沒有固定的擇偶標準，是因為你的感情觀與你的事業企圖心綁在一起（夫妻借事業）。」這種話術對現代年輕人（特別是事業心重的使用者）來說，準確度與共鳴感是核彈級的。

在目前的 MVP 與 V2.0 階段，先把「本命盤（夫妻宮/空宮/星曜）」、「八字五行」與「RPV 權力動態」這些跨越時間的靜態靈魂羈絆做好，就足以讓你的演算法震撼整個交友市場了！